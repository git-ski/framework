DROP TABLE IF EXISTS `l_customers`;

CREATE TABLE `l_customers` (
  `l_customer_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'L顧客履歴ID',
  `customer_no` varchar(32) DEFAULT NULL COMMENT '会員番号',
  `login` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL COMMENT '会員ID（ログインID）',
  `log_type` tinyint(3) unsigned NOT NULL DEFAULT '1' COMMENT '履歴タイプ[1: 顧客情報変更 2: パスワード変更]',
  `m_customer_id` int(10) unsigned NOT NULL COMMENT 'M顧客ID',
  `name_sei` varchar(64) DEFAULT NULL COMMENT '名前（姓）',
  `name_mei` varchar(64) DEFAULT NULL COMMENT '名前（名）',
  `kana_sei` varchar(64) DEFAULT NULL COMMENT 'カナ（姓）',
  `kana_mei` varchar(64) DEFAULT NULL COMMENT 'カナ（名）',
  `customer_password` varchar(256) DEFAULT NULL COMMENT 'パスワード',
  `temp_password_flag` tinyint(3) unsigned NOT NULL DEFAULT '1' COMMENT '仮パスワードフラグ',
  `m_prefecture_id` int(10) unsigned DEFAULT NULL COMMENT 'M都道府県マスタID',
  `m_country_id` int(10) unsigned DEFAULT NULL COMMENT 'M国名マスタID',
  `zip_cd` varchar(16) DEFAULT NULL COMMENT '郵便番号',
  `address01` varchar(256) DEFAULT NULL COMMENT '市区町村',
  `address02` varchar(256) DEFAULT NULL COMMENT '番地',
  `address03` varchar(256) DEFAULT NULL COMMENT '建物名',
  `email` varchar(128) DEFAULT NULL COMMENT 'PCメールアドレス',
  `phone` varchar(32) DEFAULT NULL COMMENT '電話番号',
  `birth_date` date DEFAULT NULL COMMENT '生年月日',
  `member_register_date` date DEFAULT NULL COMMENT '会員登録日',
  `member_withdraw_date` date DEFAULT NULL COMMENT '会員退会日',
  `withdraw_reason` varchar(512) DEFAULT NULL COMMENT '退会理由',
  `withdraw_note` varchar(512) DEFAULT NULL COMMENT '退会時備考',
  `create_date` date NOT NULL COMMENT '作成日',
  `create_time` time NOT NULL COMMENT '作成時',
  `create_admin_id` int(10) unsigned DEFAULT NULL COMMENT '作成管理ユーザーID',
  `update_date` date NOT NULL COMMENT '更新日',
  `update_time` time NOT NULL COMMENT '更新時',
  `update_admin_id` int(10) unsigned DEFAULT NULL COMMENT '更新管理ユーザーID',
  `delete_flag` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '削除フラグ [0:未削除 1:削除済み]',
  PRIMARY KEY (`l_customer_id`),
  KEY `fk_m_customer_id_lc` (`m_customer_id`),
  KEY `fk_m_country_id_01_lc` (`m_country_id`),
  CONSTRAINT `fk_m_country_id_01_lc` FOREIGN KEY (`m_country_id`) REFERENCES `m_countries` (`m_country_id`),
  CONSTRAINT `fk_m_customer_id_lc` FOREIGN KEY (`m_customer_id`) REFERENCES `m_customers` (`m_customer_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;