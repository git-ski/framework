DROP TABLE IF EXISTS `m_customers`;

CREATE TABLE `m_customers` (
  `m_customer_id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'M顧客ID',
  `customer_no` varchar(32) DEFAULT NULL COMMENT '会員番号',
  `login` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL COMMENT '会員ID（ログインID）',
  `name_sei` varchar(64) DEFAULT NULL COMMENT '名前（姓）',
  `name_mei` varchar(64) DEFAULT NULL COMMENT '名前（名）',
  `kana_sei` varchar(64) DEFAULT NULL COMMENT 'カナ（姓）',
  `kana_mei` varchar(64) DEFAULT NULL COMMENT 'カナ（名）',
  `customer_password` varchar(256) DEFAULT NULL COMMENT 'パスワード',
  `temp_password_flag` tinyint(3) unsigned NOT NULL DEFAULT '1' COMMENT '仮パスワードフラグ',
  `m_prefecture_id` int(10) unsigned DEFAULT NULL COMMENT 'M都道府県マスタID',
  `m_country_id` int(10) unsigned DEFAULT NULL COMMENT 'M国名マスタID',
  `zip_cd` varchar(16) DEFAULT NULL COMMENT '郵便番号',
  `address01` varchar(256) DEFAULT NULL COMMENT '市区町村',
  `address02` varchar(256) DEFAULT NULL COMMENT '番地',
  `address03` varchar(256) DEFAULT NULL COMMENT '建物名',
  `email` varchar(128) DEFAULT NULL COMMENT 'PCメールアドレス',
  `phone` varchar(32) DEFAULT NULL COMMENT '電話番号',
  `birth_date` date DEFAULT NULL COMMENT '生年月日',
  `sex_type_id` int(10) unsigned DEFAULT NULL COMMENT '性別ID（M語彙詳細ID）',
  `mailmagazine_receive_flag` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT 'メルマガ受信フラグ[0:拒否 1:受信]',
  `member_register_date` date DEFAULT NULL COMMENT '会員登録日',
  `member_withdraw_date` date DEFAULT NULL COMMENT '会員退会日',
  `withdraw_reason` varchar(512) DEFAULT NULL COMMENT '退会理由',
  `withdraw_note` varchar(512) DEFAULT NULL COMMENT '退会時備考',
  `last_logint_datetime` datetime DEFAULT NULL COMMENT '最終ログイン日時',
  `default_language` tinyint(4) NOT NULL DEFAULT '1' COMMENT 'デフォルト言語[1:ja 2:en]',
  `create_date` date NOT NULL COMMENT '作成日',
  `create_time` time NOT NULL COMMENT '作成時',
  `create_admin_id` int(10) unsigned DEFAULT NULL COMMENT '作成管理ユーザーID',
  `update_date` date NOT NULL COMMENT '更新日',
  `update_time` time NOT NULL COMMENT '更新時',
  `update_admin_id` int(10) unsigned DEFAULT NULL COMMENT '更新管理ユーザーID',
  `delete_flag` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '削除フラグ [0:未削除 1:削除済み]',
  PRIMARY KEY (`m_customer_id`),
  KEY `fk_m_prefecture_id_01_mc` (`m_prefecture_id`),
  KEY `fk_m_country_id_01_mc` (`m_country_id`),
  KEY `idx_login_mc` (`login`),
  CONSTRAINT `fk_m_country_id_01_mc` FOREIGN KEY (`m_country_id`) REFERENCES `m_countries` (`m_country_id`),
  CONSTRAINT `fk_m_prefecture_id_01_mc` FOREIGN KEY (`m_prefecture_id`) REFERENCES `m_prefectures` (`m_prefecture_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='M顧客';